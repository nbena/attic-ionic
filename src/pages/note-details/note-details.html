<!--
  Generated template for the NoteDetails page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar color="primary">
    <ion-title>Note details</ion-title>
    <!-- <button ion-button icon-only menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button> -->
    <ion-buttons start>
      <button ion-button icon-only right (click)="showPopover($event)"
        >
        <ion-icon name="more"></ion-icon>
      </button>
    </ion-buttons>


  </ion-navbar>

</ion-header>

<!-- <ion-icon name="refresh"></ion-icon>-->

<ion-content padding>



<ion-refresher (ionRefresh)="refresh($event)">
  <ion-refresher-content></ion-refresher-content>
</ion-refresher>

<div *ngIf="showSpinner" text-center>
  <ion-spinner></ion-spinner>
</div>

<ion-card>

  <ion-list>


      <ion-item>
        <ion-label style="font-weight: bold">
          {{note?.title}}
        </ion-label>
      </ion-item>


      <ion-item text-wrap readonly>
        <ion-label>
          {{note?.text}}
        </ion-label>
      </ion-item>


<!--
      <ion-chip #chip2>
        <ion-icon name="pin" color="primary"></ion-icon>
        <ion-label>With Icon</ion-label>
        <button ion-button (click)="delete(chip2)">
          <ion-icon name="close"></ion-icon>
        </button>
      </ion-chip>-->



        <ion-item>
          <ion-label stacked color="generic-gray">
            Main tags
          </ion-label>
          <button type="button"
          ion-button item-right color="primary"
          (click)="addMainTags()"
          [disabled]="(!isNoteReallyLoaded && !areTagsReallyLoaded)"
          >
            <ion-icon name="add-circle"></ion-icon>
          </button>
        </ion-item>

      <!-- <ion-item>
        <ion-list> -->
          <ion-chip *ngFor="let mainTag of shownMainTags; let i=index" (click)="displayTagDetails(mainTag.title)">
            <ion-label>
            {{mainTag.title}}
            </ion-label>
            <!--<ion-icon name="pin" color="primary"></ion-icon>-->
            <button ion-button (click)="deleteMainTags($event, i, mainTag)">
              <ion-icon name="close"></ion-icon>
            </button>
          </ion-chip>
        <!-- </ion-list>
      </ion-item> -->




      <ion-item>
        <ion-label stacked color="generic-gray">
          Other tags
        </ion-label>
        <button type="button"
        ion-button item-right color="primary" (click)="addOtherTags()"
        [disabled]="(!isNoteReallyLoaded && !areTagsReallyLoaded)"
        >
          <ion-icon name="add-circle"></ion-icon>
        </button>
      </ion-item>

      <!-- <ion-item>
        <ion-list> -->
          <ion-chip *ngFor="let otherTag of shownOtherTags; let i=index" (click)="displayTagDetails(otherTag.title)">
            <ion-label>
            {{otherTag.title}}
          </ion-label>
          <button ion-button (click)="deleteOtherTags($event, i, otherTag)">
            <ion-icon name="close"></ion-icon>
          </button>
          </ion-chip>
        <!-- </ion-list>
    </ion-item> -->


      <!-- <ion-item>
        <ion-label>
          Done: {{note?.isDone}}
        </ion-label>
      </ion-item> -->

      <ion-item>
        <ion-label stacked color="generic-gray">Done:</ion-label>
        <ion-toggle
        [disabled]="!isNoteReallyLoaded"
        [(ngModel)]="shownIsDone" (ionChange)="isDoneChanges()"></ion-toggle>
      </ion-item>


      <ion-item>
        <ion-label stacked color="generic-gray">
          Links
        </ion-label>
        <button type="button"
        ion-button item-right color="primary" (click)="pushLinks()"
        [disabled]="!isNoteReallyLoaded"
        >
          <ion-icon name="add-circle"></ion-icon>
        </button>
      </ion-item>

        <!-- <ion-item>
        <ion-list> -->
          <ion-chip *ngFor="let link of shownLinks; let i=index" (click)="browse(link)">
            <ion-label>
              {{link}}
            </ion-label>
            <button ion-button (click)="deleteLinks($event, i, link)">
              <ion-icon name="close"></ion-icon>
            </button>
          </ion-chip>
        <!-- </ion-list>
      </ion-item> -->

      <ion-item *ngIf="!isLinkValid">
        <ion-label class="reduced-font invalid-red">
          Please insert a valid link.
        </ion-label>
      </ion-item>


<!--using angular pipes to display dates. -->
      <ion-item>
        <ion-label stacked color="generic-gray" item-left>
          Created:
        </ion-label>
        <ion-label item-right>
          {{note?.creationdate | date:'mediumDate'}}
        </ion-label>
      </ion-item>

      <ion-item>
        <ion-label stacked color="generic-gray" item-left>
          Last modification:
        </ion-label>
        <ion-label item-right>
          {{note?.lastmodificationdate | date:'mediumDate'}}
        </ion-label>
      </ion-item>


    </ion-list>

    <button ion-button full [disabled]="!submitChangeEnabled" (click)="submit()">Submit change</button>

  </ion-card>
  <!-- </ion-refresher-content>
  </ion-refresher> -->

</ion-content>
